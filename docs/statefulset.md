## Kubernetes and StatefulSet

Due to stateless nature of containers and so Kubernetes Pods, running stateful applications like databases in Kubernetes can sound contradictory. 

Although it is possible to run stateful applications in Kubernetes, it is not straightforward and most of the time is not recommended.

The most common way to run a stateful application on Kubernetes is to use a **StatefulSet**. StatefulSets look similar to Deployments, but they are quite different. 

## Deployment vs Statefulset

The main challenges in running stateful application is to guarantee the uniqueness of the network identity of the Pods, the order of the Pod deployment and the persistence of the data.

### Pod identity

Deployment pod's name is not predictable. It is generated by the deployment name and a random has. 
StatefulSet pod's name has persistent identity whit the Statefulset name and a sequential number that helps to keep cardinality.

### Pod creation sequence

Deployment's pods are created in parallel. StatefulSet's pods are created sequentially. This is important for applications that need to be deployed in a specific order.
StatefulSet: pods are created in a sequence and cannot be scaled down until all the pods are created.


### Pod transparency
Deployment's pod querying is transparent to the user/clients. Pods are identical and can be interchanged
Stateful's pod are not identical and cannot be interchanged. This is important because application state must be considered data synchronization among replicas volumes.

### Rescheduling
Deployment's pods can be rescheduled to any node. StatefulSet's pods are rescheduled to the same node and at any time. Statefulset's pods retain their identity when reshcheduled on another node
